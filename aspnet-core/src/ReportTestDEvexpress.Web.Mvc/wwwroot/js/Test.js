
$(function () {

    const testdata=[{
            "headId": -1,
            "id": 1,
            "budgetId": 11985,
            "attributeId": 1424,
            "level": 0,
            "firstAttributeId": 0,
            "aliasid": 0,
            "aliasorder": 1,
            "attributeorder": null,
            "groupingCode": "Demo",
            "attributecode": "d1",
            "attributeDescription": "d1",
            "sumOfFirstAttributeAmounts": 0,
            "sumApprovedChanges": 0,
            "sumCurrentBudget": 7000,
            "sumOriginalBudget": 7000,
            "cB_FFC": 7000,
            "commitments_Previous": 0,
            "commitments_Period": 0,
            "preV_MNTH_FFC": 0,
            "expenditure_Previous": 0,
            "expenditure_Period": 0,
            "commitment_To_Date": 0,
            "commitment_TO_Come": 7000,
            "var_Monthly_Forecast": 7000,
            "expenditure_ToDate": 0,
            "cB_CommitmentInPreperation": 0,
            "cB_TotalActuals": 0,
            "cB_ActualsApproved": 0,
            "cB_ActualsInPreperation": 0,
            "meB_TotalCommitments": 0,
            "meB_FFC": 0,
            "meB_CommitmentApproved": 0,
            "meB_CommitmentsInPreperation": 0,
            "meB_TotalActuals": 0,
            "meB_ActualApproved": 0,
            "meB_ActualsInPreperation": 0,
            "budgetCount": 0,
            "secondAttribute": 0,
            "thirdAttribute": 0,
            "fourthAttribute": 0,
            "fifthAttribute": 0
        },
        {
            "headId": 1,
            "id": 2,
            "budgetId": 11985,
            "attributeId": 1427,
            "level": 0,
            "firstAttributeId": 0,
            "aliasid": 0,
            "aliasorder": 2,
            "attributeorder": null,
            "groupingCode": "check",
            "attributecode": "c1",
            "attributeDescription": "c1",
            "sumOfFirstAttributeAmounts": 0,
            "sumApprovedChanges": 0,
            "sumCurrentBudget": 7000,
            "sumOriginalBudget": 7000,
            "cB_FFC": 7000,
            "commitments_Previous": 0,
            "commitments_Period": 0,
            "preV_MNTH_FFC": 0,
            "expenditure_Previous": 0,
            "expenditure_Period": 0,
            "commitment_To_Date": 0,
            "commitment_TO_Come": 7000,
            "var_Monthly_Forecast": 7000,
            "expenditure_ToDate": 0,
            "cB_CommitmentInPreperation": 0,
            "cB_TotalActuals": 0,
            "cB_ActualsApproved": 0,
            "cB_ActualsInPreperation": 0,
            "meB_TotalCommitments": 0,
            "meB_FFC": 0,
            "meB_CommitmentApproved": 0,
            "meB_CommitmentsInPreperation": 0,
            "meB_TotalActuals": 0,
            "meB_ActualApproved": 0,
            "meB_ActualsInPreperation": 0,
            "budgetCount": 0,
            "secondAttribute": 0,
            "thirdAttribute": 0,
            "fourthAttribute": 0,
            "fifthAttribute": 0
        },
        {
            "headId": 2,
            "id": 3,
            "budgetId": 11985,
            "attributeId": 1430,
            "level": 0,
            "firstAttributeId": 0,
            "aliasid": 0,
            "aliasorder": 3,
            "attributeorder": null,
            "groupingCode": "test",
            "attributecode": "t1",
            "attributeDescription": "t1",
            "sumOfFirstAttributeAmounts": 0,
            "sumApprovedChanges": 0,
            "sumCurrentBudget": 3100,
            "sumOriginalBudget": 3100,
            "cB_FFC": 3100,
            "commitments_Previous": 0,
            "commitments_Period": 0,
            "preV_MNTH_FFC": 0,
            "expenditure_Previous": 0,
            "expenditure_Period": 0,
            "commitment_To_Date": 0,
            "commitment_TO_Come": 3100,
            "var_Monthly_Forecast": 3100,
            "expenditure_ToDate": 0,
            "cB_CommitmentInPreperation": 0,
            "cB_TotalActuals": 0,
            "cB_ActualsApproved": 0,
            "cB_ActualsInPreperation": 0,
            "meB_TotalCommitments": 0,
            "meB_FFC": 0,
            "meB_CommitmentApproved": 0,
            "meB_CommitmentsInPreperation": 0,
            "meB_TotalActuals": 0,
            "meB_ActualApproved": 0,
            "meB_ActualsInPreperation": 0,
            "budgetCount": 0,
            "secondAttribute": 0,
            "thirdAttribute": 0,
            "fourthAttribute": 0,
            "fifthAttribute": 0
        },
        {
            "headId": 2,
            "id": 18,
            "budgetId": 11988,
            "attributeId": 1432,
            "level": 0,
            "firstAttributeId": 0,
            "aliasid": 0,
            "aliasorder": 3,
            "attributeorder": null,
            "groupingCode": "test",
            "attributecode": "t3",
            "attributeDescription": "t3",
            "sumOfFirstAttributeAmounts": 0,
            "sumApprovedChanges": 0,
            "sumCurrentBudget": 3900,
            "sumOriginalBudget": 3900,
            "cB_FFC": 3900,
            "commitments_Previous": 0,
            "commitments_Period": 0,
            "preV_MNTH_FFC": 0,
            "expenditure_Previous": 0,
            "expenditure_Period": 0,
            "commitment_To_Date": 0,
            "commitment_TO_Come": 3900,
            "var_Monthly_Forecast": 3900,
            "expenditure_ToDate": 0,
            "cB_CommitmentInPreperation": 0,
            "cB_TotalActuals": 0,
            "cB_ActualsApproved": 0,
            "cB_ActualsInPreperation": 0,
            "meB_TotalCommitments": 0,
            "meB_FFC": 0,
            "meB_CommitmentApproved": 0,
            "meB_CommitmentsInPreperation": 0,
            "meB_TotalActuals": 0,
            "meB_ActualApproved": 0,
            "meB_ActualsInPreperation": 0,
            "budgetCount": 0,
            "secondAttribute": 0,
            "thirdAttribute": 0,
            "fourthAttribute": 0,
            "fifthAttribute": 0
        },
        {
            "headId": 3,
            "id": 4,
            "budgetId": 11985,
            "attributeId": 1433,
            "level": 0,
            "firstAttributeId": 0,
            "aliasid": 0,
            "aliasorder": 4,
            "attributeorder": null,
            "groupingCode": "WBS 1",
            "attributecode": "w1",
            "attributeDescription": "w1",
            "sumOfFirstAttributeAmounts": 0,
            "sumApprovedChanges": 0,
            "sumCurrentBudget": 2000,
            "sumOriginalBudget": 2000,
            "cB_FFC": 2000,
            "commitments_Previous": 0,
            "commitments_Period": 0,
            "preV_MNTH_FFC": 0,
            "expenditure_Previous": 0,
            "expenditure_Period": 0,
            "commitment_To_Date": 0,
            "commitment_TO_Come": 2000,
            "var_Monthly_Forecast": 2000,
            "expenditure_ToDate": 0,
            "cB_CommitmentInPreperation": 0,
            "cB_TotalActuals": 0,
            "cB_ActualsApproved": 0,
            "cB_ActualsInPreperation": 0,
            "meB_TotalCommitments": 0,
            "meB_FFC": 0,
            "meB_CommitmentApproved": 0,
            "meB_CommitmentsInPreperation": 0,
            "meB_TotalActuals": 0,
            "meB_ActualApproved": 0,
            "meB_ActualsInPreperation": 0,
            "budgetCount": 0,
            "secondAttribute": 0,
            "thirdAttribute": 0,
            "fourthAttribute": 0,
            "fifthAttribute": 0
        },
        {
            "headId": 3,
            "id": 9,
            "budgetId": 11986,
            "attributeId": 1434,
            "level": 0,
            "firstAttributeId": 0,
            "aliasid": 0,
            "aliasorder": 4,
            "attributeorder": null,
            "groupingCode": "WBS 1",
            "attributecode": "w2",
            "attributeDescription": "w2",
            "sumOfFirstAttributeAmounts": 0,
            "sumApprovedChanges": 0,
            "sumCurrentBudget": 600,
            "sumOriginalBudget": 600,
            "cB_FFC": 600,
            "commitments_Previous": 0,
            "commitments_Period": 0,
            "preV_MNTH_FFC": 0,
            "expenditure_Previous": 0,
            "expenditure_Period": 0,
            "commitment_To_Date": 0,
            "commitment_TO_Come": 600,
            "var_Monthly_Forecast": 600,
            "expenditure_ToDate": 0,
            "cB_CommitmentInPreperation": 0,
            "cB_TotalActuals": 0,
            "cB_ActualsApproved": 0,
            "cB_ActualsInPreperation": 0,
            "meB_TotalCommitments": 0,
            "meB_FFC": 0,
            "meB_CommitmentApproved": 0,
            "meB_CommitmentsInPreperation": 0,
            "meB_TotalActuals": 0,
            "meB_ActualApproved": 0,
            "meB_ActualsInPreperation": 0,
            "budgetCount": 0,
            "secondAttribute": 0,
            "thirdAttribute": 0,
            "fourthAttribute": 0,
            "fifthAttribute": 0
        },
        {
            "headId": 3,
            "id": 14,
            "budgetId": 11987,
            "attributeId": 1435,
            "level": 0,
            "firstAttributeId": 0,
            "aliasid": 0,
            "aliasorder": 4,
            "attributeorder": null,
            "groupingCode": "WBS 1",
            "attributecode": "w3",
            "attributeDescription": "w3",
            "sumOfFirstAttributeAmounts": 0,
            "sumApprovedChanges": 0,
            "sumCurrentBudget": 500,
            "sumOriginalBudget": 500,
            "cB_FFC": 500,
            "commitments_Previous": 0,
            "commitments_Period": 0,
            "preV_MNTH_FFC": 0,
            "expenditure_Previous": 0,
            "expenditure_Period": 0,
            "commitment_To_Date": 0,
            "commitment_TO_Come": 500,
            "var_Monthly_Forecast": 500,
            "expenditure_ToDate": 0,
            "cB_CommitmentInPreperation": 0,
            "cB_TotalActuals": 0,
            "cB_ActualsApproved": 0,
            "cB_ActualsInPreperation": 0,
            "meB_TotalCommitments": 0,
            "meB_FFC": 0,
            "meB_CommitmentApproved": 0,
            "meB_CommitmentsInPreperation": 0,
            "meB_TotalActuals": 0,
            "meB_ActualApproved": 0,
            "meB_ActualsInPreperation": 0,
            "budgetCount": 0,
            "secondAttribute": 0,
            "thirdAttribute": 0,
            "fourthAttribute": 0,
            "fifthAttribute": 0
        },
        {
            "headId": 18,
            "id": 19,
            "budgetId": 11988,
            "attributeId": 1435,
            "level": 0,
            "firstAttributeId": 0,
            "aliasid": 0,
            "aliasorder": 4,
            "attributeorder": null,
            "groupingCode": "WBS 1",
            "attributecode": "w3",
            "attributeDescription": "w3",
            "sumOfFirstAttributeAmounts": 0,
            "sumApprovedChanges": 0,
            "sumCurrentBudget": 3900,
            "sumOriginalBudget": 3900,
            "cB_FFC": 3900,
            "commitments_Previous": 0,
            "commitments_Period": 0,
            "preV_MNTH_FFC": 0,
            "expenditure_Previous": 0,
            "expenditure_Period": 0,
            "commitment_To_Date": 0,
            "commitment_TO_Come": 3900,
            "var_Monthly_Forecast": 3900,
            "expenditure_ToDate": 0,
            "cB_CommitmentInPreperation": 0,
            "cB_TotalActuals": 0,
            "cB_ActualsApproved": 0,
            "cB_ActualsInPreperation": 0,
            "meB_TotalCommitments": 0,
            "meB_FFC": 0,
            "meB_CommitmentApproved": 0,
            "meB_CommitmentsInPreperation": 0,
            "meB_TotalActuals": 0,
            "meB_ActualApproved": 0,
            "meB_ActualsInPreperation": 0,
            "budgetCount": 0,
            "secondAttribute": 0,
            "thirdAttribute": 0,
            "fourthAttribute": 0,
            "fifthAttribute": 0
        },
        {
            "headId": 4,
            "id": 5,
            "budgetId": 11985,
            "attributeId": 1436,
            "level": 0,
            "firstAttributeId": 0,
            "aliasid": 0,
            "aliasorder": 5,
            "attributeorder": null,
            "groupingCode": "rest",
            "attributecode": "r1",
            "attributeDescription": "r1",
            "sumOfFirstAttributeAmounts": 0,
            "sumApprovedChanges": 0,
            "sumCurrentBudget": 2000,
            "sumOriginalBudget": 2000,
            "cB_FFC": 2000,
            "commitments_Previous": 0,
            "commitments_Period": 0,
            "preV_MNTH_FFC": 0,
            "expenditure_Previous": 0,
            "expenditure_Period": 0,
            "commitment_To_Date": 0,
            "commitment_TO_Come": 2000,
            "var_Monthly_Forecast": 2000,
            "expenditure_ToDate": 0,
            "cB_CommitmentInPreperation": 0,
            "cB_TotalActuals": 0,
            "cB_ActualsApproved": 0,
            "cB_ActualsInPreperation": 0,
            "meB_TotalCommitments": 0,
            "meB_FFC": 0,
            "meB_CommitmentApproved": 0,
            "meB_CommitmentsInPreperation": 0,
            "meB_TotalActuals": 0,
            "meB_ActualApproved": 0,
            "meB_ActualsInPreperation": 0,
            "budgetCount": 0,
            "secondAttribute": 0,
            "thirdAttribute": 0,
            "fourthAttribute": 0,
            "fifthAttribute": 0
        },
        {
            "headId": 9,
            "id": 10,
            "budgetId": 11986,
            "attributeId": 1437,
            "level": 0,
            "firstAttributeId": 0,
            "aliasid": 0,
            "aliasorder": 5,
            "attributeorder": null,
            "groupingCode": "rest",
            "attributecode": "r2",
            "attributeDescription": "r2",
            "sumOfFirstAttributeAmounts": 0,
            "sumApprovedChanges": 0,
            "sumCurrentBudget": 600,
            "sumOriginalBudget": 600,
            "cB_FFC": 600,
            "commitments_Previous": 0,
            "commitments_Period": 0,
            "preV_MNTH_FFC": 0,
            "expenditure_Previous": 0,
            "expenditure_Period": 0,
            "commitment_To_Date": 0,
            "commitment_TO_Come": 600,
            "var_Monthly_Forecast": 600,
            "expenditure_ToDate": 0,
            "cB_CommitmentInPreperation": 0,
            "cB_TotalActuals": 0,
            "cB_ActualsApproved": 0,
            "cB_ActualsInPreperation": 0,
            "meB_TotalCommitments": 0,
            "meB_FFC": 0,
            "meB_CommitmentApproved": 0,
            "meB_CommitmentsInPreperation": 0,
            "meB_TotalActuals": 0,
            "meB_ActualApproved": 0,
            "meB_ActualsInPreperation": 0,
            "budgetCount": 0,
            "secondAttribute": 0,
            "thirdAttribute": 0,
            "fourthAttribute": 0,
            "fifthAttribute": 0
        },
        {
            "headId": 14,
            "id": 15,
            "budgetId": 11987,
            "attributeId": 1438,
            "level": 0,
            "firstAttributeId": 0,
            "aliasid": 0,
            "aliasorder": 5,
            "attributeorder": null,
            "groupingCode": "rest",
            "attributecode": "r3",
            "attributeDescription": "r3",
            "sumOfFirstAttributeAmounts": 0,
            "sumApprovedChanges": 0,
            "sumCurrentBudget": 500,
            "sumOriginalBudget": 500,
            "cB_FFC": 500,
            "commitments_Previous": 0,
            "commitments_Period": 0,
            "preV_MNTH_FFC": 0,
            "expenditure_Previous": 0,
            "expenditure_Period": 0,
            "commitment_To_Date": 0,
            "commitment_TO_Come": 500,
            "var_Monthly_Forecast": 500,
            "expenditure_ToDate": 0,
            "cB_CommitmentInPreperation": 0,
            "cB_TotalActuals": 0,
            "cB_ActualsApproved": 0,
            "cB_ActualsInPreperation": 0,
            "meB_TotalCommitments": 0,
            "meB_FFC": 0,
            "meB_CommitmentApproved": 0,
            "meB_CommitmentsInPreperation": 0,
            "meB_TotalActuals": 0,
            "meB_ActualApproved": 0,
            "meB_ActualsInPreperation": 0,
            "budgetCount": 0,
            "secondAttribute": 0,
            "thirdAttribute": 0,
            "fourthAttribute": 0,
            "fifthAttribute": 0
        },
        {
            "headId": 19,
            "id": 20,
            "budgetId": 11988,
            "attributeId": 1438,
            "level": 0,
            "firstAttributeId": 0,
            "aliasid": 0,
            "aliasorder": 5,
            "attributeorder": null,
            "groupingCode": "rest",
            "attributecode": "r3",
            "attributeDescription": "r3",
            "sumOfFirstAttributeAmounts": 0,
            "sumApprovedChanges": 0,
            "sumCurrentBudget": 3900,
            "sumOriginalBudget": 3900,
            "cB_FFC": 3900,
            "commitments_Previous": 0,
            "commitments_Period": 0,
            "preV_MNTH_FFC": 0,
            "expenditure_Previous": 0,
            "expenditure_Period": 0,
            "commitment_To_Date": 0,
            "commitment_TO_Come": 3900,
            "var_Monthly_Forecast": 3900,
            "expenditure_ToDate": 0,
            "cB_CommitmentInPreperation": 0,
            "cB_TotalActuals": 0,
            "cB_ActualsApproved": 0,
            "cB_ActualsInPreperation": 0,
            "meB_TotalCommitments": 0,
            "meB_FFC": 0,
            "meB_CommitmentApproved": 0,
            "meB_CommitmentsInPreperation": 0,
            "meB_TotalActuals": 0,
            "meB_ActualApproved": 0,
            "meB_ActualsInPreperation": 0,
            "budgetCount": 0,
            "secondAttribute": 0,
            "thirdAttribute": 0,
            "fourthAttribute": 0,
            "fifthAttribute": 0
        }
    ]
  

    debugger;
    $("#treeList1").dxTreeList({
        dataSource: testdata,
        rootValue: -1,
        keyExpr: "id",
        parentIdExpr: "headId",
        filterRow: { visible: true },
        searchPanel: { visible: true },
        toolbar: {
            items: [
                {
                    location: "after",
                    widget: "dxButton",
                    options: {
                        text: "Collapse All",
                        width: 136,
                        onClick(e) {
                            const expanding = e.component.option("text") === "Expand All";
                            treeList.option({
                                autoExpandAll: expanding,
                                expandedRowKeys: []
                            });
                            e.component.option("text", expanding ? "Collapse All" : "Expand All");
                        },
                    },
                },
                {
                    name: "addRowButton",
                    showText: "always"
                },
                "exportButton",
                "columnChooserButton",
                "searchPanel"
            ]
        },
        rowDragging: {
            allowDropInsideItem: true,
            allowReordering: true,
            onDragChange: function (e) {
                var visibleRows = treeList.getVisibleRows(),
                    sourceNode = treeList.getNodeByKey(e.itemData.ID),
                    targetNode = visibleRows[e.toIndex].node;

                while (targetNode && targetNode.data) {
                    if (targetNode.data.ID === sourceNode.data.ID) {
                        e.cancel = true;
                        break;
                    }
                    targetNode = targetNode.parent;
                }
            },
            paging: {
                enabled: true,
                pageSize: 10
            },
            onReorder: function (e) {
                var visibleRows = e.component.getVisibleRows(),
                    sourceData = e.itemData,
                    targetData = visibleRows[e.toIndex].data;

                if (e.dropInsideItem) {
                    e.itemData.HeadID = targetData.ID;
                } else {
                    var sourceIndex = employees.indexOf(sourceData),
                        targetIndex = employees.indexOf(targetData);

                    if (sourceData.HeadID !== targetData.HeadID) {
                        sourceData.HeadID = targetData.HeadID;
                        if (e.toIndex > e.fromIndex) {
                            targetIndex++;
                        }
                    }
                    employees.splice(sourceIndex, 1);
                    employees.splice(targetIndex, 0, sourceData);
                }
                e.component.refresh();
            }
        },
        selection: { mode: "single" },
        columns: [{
            dataField: "attributecode",
            validationRules: [{ type: "required" }]
        },
            {
                dataField: "attributeDescription",
                validationRules: [{ type: "required" }]
            },
            {
                dataField: "groupingCode",
                validationRules: [{ type: "required" }]
            },
            {
            dataField: "sumCurrentBudget",
            validationRules: [{ type: "required" }]
        },
        {
            dataField: "sumOriginalBudget",
            validationRules: [{ type: "required" }]
            },
            {
                dataField: "cB_FFC",
                validationRules: [{ type: "required" }]
            }
            // ...
        ], 
        columnChooser: { enabled: true },
        columnFixing: { enabled: true },
    });

});